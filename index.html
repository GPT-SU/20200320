<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>井字遊戲</title>
  <style>
    /* 設定背景使用淡紅色 */
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #ffcccc;
    }
    /* 遊戲區塊設定為 3x3 的格子 */
    #game {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 5px;
      padding: 5px;
      background-color: #444;
      border: 3px solid #222;
    }
    /* 每個格子設定 */
    .cell {
      width: 100px;
      height: 100px;
      background-color: #fff;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 0;
      position: relative;
    }
    /* 畫圈的樣式 */
    .circle {
      width: 60px;
      height: 60px;
      border: 5px solid #00f;
      border-radius: 50%;
      box-sizing: border-box;
    }
    /* 畫叉的樣式，利用兩條旋轉的線條 */
    .cross {
      position: relative;
      width: 60px;
      height: 60px;
    }
    .cross::before,
    .cross::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      height: 5px;
      background-color: #f00;
    }
    .cross::before {
      transform: translateY(-50%) rotate(45deg);
    }
    .cross::after {
      transform: translateY(-50%) rotate(-45deg);
    }
  </style>
</head>
<body>
  <div id="game">
    <div class="cell" data-index="0"></div>
    <div class="cell" data-index="1"></div>
    <div class="cell" data-index="2"></div>
    <div class="cell" data-index="3"></div>
    <div class="cell" data-index="4"></div>
    <div class="cell" data-index="5"></div>
    <div class="cell" data-index="6"></div>
    <div class="cell" data-index="7"></div>
    <div class="cell" data-index="8"></div>
  </div>

  <script>
    // 初始玩家為圈
    let currentPlayer = 'circle';
    // 用陣列儲存每格狀態，初始值皆為空
    const board = Array(9).fill('');
    const cells = document.querySelectorAll('.cell');
    // 定義所有可能的勝利組合
    const winningCombinations = [
      [0, 1, 2],
      [3, 4, 5],
      [6, 7, 8],
      [0, 3, 6],
      [1, 4, 7],
      [2, 5, 8],
      [0, 4, 8],
      [2, 4, 6]
    ];

    // 檢查某玩家是否獲勝
    function checkWin(player) {
      return winningCombinations.some(combination => {
        return combination.every(index => board[index] === player);
      });
    }

    // 檢查是否平手
    function checkTie() {
      return board.every(cell => cell !== '');
    }

    // 重置遊戲
    function resetBoard() {
      board.fill('');
      cells.forEach(cell => {
        cell.innerHTML = '';
      });
      currentPlayer = 'circle';
    }

    // 為每個格子增加點擊事件
    cells.forEach(cell => {
      cell.addEventListener('click', () => {
        const index = cell.getAttribute('data-index');
        if (board[index] !== '') return;  // 已被點選則跳過

        // 根據目前玩家放置圖案
        board[index] = currentPlayer;
        if (currentPlayer === 'circle') {
          cell.innerHTML = '<div class="circle"></div>';
        } else {
          cell.innerHTML = '<div class="cross"></div>';
        }

        // 檢查是否獲勝
        if (checkWin(currentPlayer)) {
          alert(currentPlayer === 'circle' ? '圈圈獲勝！' : '叉叉獲勝！');
          resetBoard();
          return;
        }
        // 檢查是否平手
        if (checkTie()) {
          alert('平手！');
          resetBoard();
          return;
        }

        // 換下一位玩家
        currentPlayer = currentPlayer === 'circle' ? 'cross' : 'circle';
      });
    });
  </script>
</body>
</html>
